# AI Assistant API Gateway

## Обзор Проекта

AI Assistant API Gateway — это мощный бэкенд-сервис, разработанный как центральный хаб для интеграции различных бот-платформ (таких как Telegram, WhatsApp и т.д.) с AI-моделями для диалогов. Он предоставляет унифицированную, высокопроизводительную API-точку для получения входящих сообщений, их обработки, управления историей бесед и оркестрации взаимодействий с внешними сервисами обработки естественного языка (NLP) или большими языковыми моделями (LLM) для генерации интеллектуальных ответов.

Этот сервис призван упростить разработку и развертывание чат-ботов на базе ИИ через различные каналы связи, абстрагируя сложности интеграции со специфичными для платформ API и взаимодействия с моделями ИИ.

## Ключевые Особенности

*   **Прием Сообщений с Различных Платформ**: Принимает и валидирует входящие сообщения из разнообразных источников (например, Telegram, WhatsApp) с использованием стандартизированной модели `IncomingRequest`.
*   **Транскрипция Голосовых Сообщений**: Автоматически обнаруживает голосовые сообщения и отправляет их в специализированный NLP-сервис для точной транскрипции, преобразуя устную речь в текст для обработки ИИ.
*   **Управление Историей Бесед**: Интегрируется с реляционной базой данных для хранения и извлечения логов разговоров, предоставляя необходимый контекст AI-модели для более связных и релевантных ответов.
*   **Интеграция с Внешними AI/NLP Сервисами**: Бесшовно перенаправляет обработанные сообщения и историю бесед во внешний NLP/LLM сервис для генерации ответов на основе ИИ.
*   **Надежная Архитектура Middleware**: Использует систему middleware FastAPI для сквозных функций, таких как:
    *   **Логирование Запросов/Ответов**: Предоставляет подробные логи для каждого входящего запроса и исходящего ответа, включая время обработки.
    *   **Аутентификация**: (Заглушка) расширяемый слой аутентификации для защиты API-точек.
    *   **Управление CORS**: Настроено для гибкого управления Cross-Origin Resource Sharing.
*   **Обработка Ошибок**: Всесторонняя обработка ошибок при вызовах внешних сервисов и внутренней обработке, возвращающая соответствующие HTTP-статусы и подробные сообщения.
*   **Мониторинг Состояния**: Простая точка `/health` для проверки рабочего состояния API.

## Используемые Технологии

*   **Бэкенд-фреймворк**: [**FastAPI**](https://fastapi.tiangolo.com/) (Python)
    *   Выбран за высокую производительность (основан на Starlette и Pydantic), асинхронные возможности и автоматическую документацию API (OpenAPI/Swagger UI).
*   **Асинхронный HTTP-клиент**: [**aiohttp**](https://aiohttp.readthedocs.io/)
    *   Используется для выполнения эффективных, неблокирующих HTTP-запросов к внешним NLP-сервисам и сервисам транскрипции.
*   **Модели Данных и Валидация**: [**Pydantic**](https://pydantic-docs.helpmanual.io/)
    *   Обеспечивает строгую валидацию данных для входящих запросов и исходящих ответов, гарантируя целостность данных и улучшая опыт разработчика.
*   **Управление Конфигурацией**: [**Pydantic-settings**](https://docs.pydantic.dev/latest/usage/pydantic_settings/)
    *   Управляет настройками приложения и переменными окружения типобезопасным способом.
*   **Взаимодействие с Базой Данных**: Реляционная База Данных (например, PostgreSQL, SQLite)
    *   Использует кастомный DB-менеджер (`request_logs_db_manager`) для хранения пользовательских запросов и истории бесед. (Конкретная ORM не детализирована в предоставленных сниппетах).
*   **Логирование**: Встроенный модуль Python `logging`
    *   Настроен для структурированного логирования запросов и ответов.
*   **Тестирование**: [**Pytest**](https://docs.pytest.org/)
    *   Для всестороннего модульного и интеграционного тестирования API-точек и вспомогательных функций.
*   **Middleware**: [**Starlette BaseHTTPMiddleware**](https://www.starlette.io/middleware/)
    *   Основа для кастомных компонентов middleware.

## Настройка и Установка



## API Эндпоинты

*   `POST /api/v1/chat`: Обрабатывает входящие сообщения от бот-платформ.
*   `GET /api/v1/status`: Возвращает статус обработки бота.
*   `GET /health`: Проверяет общее состояние API-сервиса.

---